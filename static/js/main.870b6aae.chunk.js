(this["webpackJsonpr3f-svg-react-spring-transitions"]=this["webpackJsonpr3f-svg-react-spring-transitions"]||[]).push([[0],{40:function(e,t,n){e.exports=n(54)},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(16),c=n.n(r),i=n(0),o=n.n(i),s=n(13),u=n(4),l=n(15);var p=function(e){var t=e.shape,n=e.rotation,r=e.position,c=e.color,i=e.opacity,s=e.index;return o.a.createElement(l.a.mesh,{rotation:n,position:r.interpolate((function(e,t,n){return[e,t,n+50*-s]}))},o.a.createElement(l.a.meshPhongMaterial,{attach:"material",color:c,opacity:i,side:a.DoubleSide,depthWrite:!1,transparent:!0}),o.a.createElement("shapeBufferGeometry",{attach:"geometry",args:[t]}))},h=n(6),f=n(8),m={happy:0,sad:1,angry:2,surprise:3,calm:4,anticipated:5},d=new(function(){function e(){Object(h.a)(this,e),this.pageDispatcher=null}return Object(f.a)(e,[{key:"setPageDispatcher",value:function(e){this.pageDispatcher=e}},{key:"setPage",value:function(e){this.pageDispatcher(m[e])}}]),e}()),g=["#ffbcb7","#21242d","#ea5158","#0d4663","#2d4a3e","#8bd8d2"],y=n(33),v=n(38),b=["happy","sad","angry","surprise","calm","anticipated"].map((function(e){return"https://raw.githubusercontent.com/doong-jo/irony-mechanical-analysis/master/src/resources/images/svg/sad1.svg"})).map((function(e){return new Promise((function(t){return(new y.a).load(e,(function(e){return t(Object(v.a)(e.paths.map((function(e,t){return e.toShapes(!0).map((function(n){return{shape:n,color:e.color,index:t}}))}))))}))}))}));var x=function(){var e=Object(i.useState)(0),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(i.useState)([]),s=Object(u.a)(c,2),h=s[0],f=s[1];d.setPageDispatcher(r),Object(i.useEffect)((function(){b[n].then(f)}),[n]);var m=Object(l.b)({color:g[n]}).color,y=Object(l.c)(h,(function(e){return e.shape.uuid}),{from:{rotation:[0,-Math.PI/4,0],position:[0,50,-200],opacity:0},enter:{rotation:[0,0,0],position:[0,0,0],opacity:1},leave:{rotation:[0,.25,0],position:[0,-50,10],opacity:0},order:["leave","enter","update"],trail:5,lazy:!0});return o.a.createElement(o.a.Fragment,null,o.a.createElement("mesh",{scale:[2e4,2e4,1],rotation:[0,a.Math.degToRad(-20),0]},o.a.createElement("planeGeometry",{attach:"geometry",args:[1,1]}),o.a.createElement(l.a.meshPhongMaterial,{attach:"material",color:m,depthTest:!1})),o.a.createElement("group",{position:[1600,-700,n],rotation:[0,a.Math.degToRad(180),0]},y.map((function(e){var t=e.item,n=e.key,a=e.props;return o.a.createElement(p,Object.assign({key:n},t,a))}))))},O=n(14),k=n.n(O),E=n(18),I=[{name:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c",sentences:[{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:2e3},{content:"\ub730\uc5d0\ub294 \ubc18\uc9dd\uc774\ub294 \uae08\ubaa8\ub798\ube5b",length:4e3},{content:"\ub4b7\ubb38\ubc16\uc5d0\ub294 \uac08\uc78e\uc758 \ub178\ub798",length:6e3},{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:8e3},{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:2e3},{content:"\ub730\uc5d0\ub294 \ubc18\uc9dd\uc774\ub294 \uae08\ubaa8\ub798\ube5b",length:4e3},{content:"\ub4b7\ubb38\ubc16\uc5d0\ub294 \uac08\uc78e\uc758 \ub178\ub798",length:6e3},{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:8e3}]},{name:"\uc12c\uc9d1\uc544\uac00",sentences:[{content:"\uc12c\uc9d1\uc544\uac00 \uac00\uc0ac \ud14c\uc2a4\ud2b8",length:2e3}]}],j=function(e){return"".concat("https://gcp-nlp-api-server.herokuapp.com","/api/gcp-lang/emotion?text=").concat(e)},D=function(e){return"".concat("https://gcp-nlp-api-server.herokuapp.com","/api/gcp-lang/entity?text=").concat(e)};function T(e,t){return w.apply(this,arguments)}function w(){return(w=Object(E.a)(k.a.mark((function e(t,n){var a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="EMOTION"===e.t0?3:"ENTITY"===e.t0?7:11;break;case 3:return e.next=5,fetch(j(t));case 5:return a=e.sent,e.abrupt("break",12);case 7:return e.next=9,fetch(D(t));case 9:return a=e.sent,e.abrupt("break",12);case 11:return e.abrupt("return");case 12:return e.next=14,a.json();case 14:return r=e.sent,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}console.log("https://gcp-nlp-api-server.herokuapp.com");var P=new(function(){function e(){Object(h.a)(this,e),this.sentencesHand=0,this.playTimeout=null,this.songIndex=0,this.emotionsOfSongs={},this.subtitleDispatcher=null,this.playIndexDispatcher=null}return Object(f.a)(e,[{key:"setSubTitleDispatcher",value:function(e){this.subtitleDispatcher=e}},{key:"setPlayIndexDispatcher",value:function(e){this.playIndexDispatcher=e}},{key:"flattenSentences",value:function(e){return e.sentences.map((function(e){var t=e.content;return"".concat(t,". ")})).join("")}},{key:"researchEmotion",value:function(){var e=Object(E.a)(k.a.mark((function e(t){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=I[t].name,!this.emotionsOfSongs[n]){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,T(this.flattenSentences(I[t]),"EMOTION");case 5:a=e.sent,r=a.sentences,this.emotionsOfSongs[n]=r;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"playIntervalCallback",value:function(){this.sentencesHand++,this.playInterval(this.songIndex)}},{key:"playInterval",value:function(e){var t=this;this.songIndex=e;var n=I[e],a=n.name,r=n.sentences;if(this.sentencesHand===r.length)return this.songIndex=(this.songIndex+1)%I.length,void this.play(this.songIndex);var c=r[this.sentencesHand],i=c.content,o=c.length,s=this.emotionsOfSongs[a][this.sentencesHand].score,u=function(e){return e>=.5?"happy":e>=.3?"surprise":e>0?"anticipated":e<=-.5?"angry":e<=-.3?"sad":e<=0?"calm":void 0}(s);d.setPage(u),this.subtitleDispatcher(i),console.log(s),console.log("emotion",u),console.log(a,i),this.playTimeout=setTimeout((function(){t.playIntervalCallback()}),o)}},{key:"play",value:function(){var e=Object(E.a)(k.a.mark((function e(){var t,n=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,this.sentencesHand=0,e.next=4,this.researchEmotion(t);case 4:this.playInterval(t),this.playIndexDispatcher(t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"playByIndex",value:function(e){clearTimeout(this.playTimeout),this.play(e)}}]),e}());var S=function(){var e=Object(i.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1];return P.setSubTitleDispatcher(a),o.a.createElement(s.b,{position:[2e3,-1900,100]},o.a.createElement("h1",null,n))},M=n(26),H=n(27);function B(){var e=Object(M.a)(["\n  border-bottom: ",";\n  text-align: center;\n  padding: 4px;\n  margin-bottom: 10px;\n  font-size: 20px;\n  cursor: pointer;\n"]);return B=function(){return e},e}function R(){var e=Object(M.a)(["\n  position: fixed;\n  left: 5%;\n  top: 70%;\n  width: max-content;\n  height: 300px;\n  display: flex;\n  flex-direction: column;\n"]);return R=function(){return e},e}var C=H.a.div(R()),N=H.a.div(B(),(function(e){return e.currentPlayIndex?"2px solid #111":"2px solid transparent"}));var z=function(e){var t=e.currentPlayIndex,n=e.list,a=Object(i.useState)(t),r=Object(u.a)(a,2),c=r[0],s=r[1];return P.setPlayIndexDispatcher(s),o.a.createElement(C,null,n.map((function(e,t){return o.a.createElement(N,{currentPlayIndex:t===c,key:"".concat(e,"_").concat(t),onClick:function(){P.playByIndex(t)}},e)})))};n(53);c.a.render(o.a.createElement((function(){return P.play(),o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{concurrent:!0,camera:{fov:80,position:[0,0,2e3],rotation:[0,a.Math.degToRad(-20),a.Math.degToRad(180)],near:.1,far:2e4}},o.a.createElement("ambientLight",{intensity:.5}),o.a.createElement("spotLight",{intensity:.5,position:[300,300,4e3]}),o.a.createElement(S,null),o.a.createElement(x,null)),o.a.createElement(z,{currentPlayIndex:0,list:I.map((function(e){return e.name}))}))}),null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.870b6aae.chunk.js.map