(this["webpackJsonpr3f-svg-react-spring-transitions"]=this["webpackJsonpr3f-svg-react-spring-transitions"]||[]).push([[0],{43:function(t,e,n){t.exports=n(62)},48:function(t,e,n){},62:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(18),i=n.n(r),o=n(0),c=n.n(o),s=n(13),u=(n(48),[{name:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c",sentences:[{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:2e3},{content:"\ub730\uc5d0\ub294 \ubc18\uc9dd\uc774\ub294 \uae08\ubaa8\ub798\ube5b",length:4e3},{content:"\ub4b7\ubb38\ubc16\uc5d0\ub294 \uac08\uc78e\uc758 \ub178\ub798",length:6e3},{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:8e3},{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:2e3},{content:"\ub730\uc5d0\ub294 \ubc18\uc9dd\uc774\ub294 \uae08\ubaa8\ub798\ube5b",length:4e3},{content:"\ub4b7\ubb38\ubc16\uc5d0\ub294 \uac08\uc78e\uc758 \ub178\ub798",length:6e3},{content:"\uc5c4\ub9c8\uc57c \ub204\ub098\uc57c \uac15\ubcc0 \uc0b4\uc790",length:8e3}]},{name:"\uc12c\uc9d1\uc544\uac00",sentences:[{content:"\uc12c\uc9d1\uc544\uac00 \uac00\uc0ac \ud14c\uc2a4\ud2b8",length:2e3}]}]),p=n(14),l=n.n(p),h=n(19),f=n(6),m=n(8),d=function(t){return"".concat("https://gcp-nlp-api-server.herokuapp.com","/api/gcp-lang/emotion?text=").concat(t)},g=function(t){return"".concat("https://gcp-nlp-api-server.herokuapp.com","/api/gcp-lang/entity?text=").concat(t)};function v(t,e){return y.apply(this,arguments)}function y(){return(y=Object(h.a)(l.a.mark((function t(e,n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="EMOTION"===t.t0?3:"ENTITY"===t.t0?7:11;break;case 3:return t.next=5,fetch(d(e));case 5:return a=t.sent,t.abrupt("break",12);case 7:return t.next=9,fetch(g(e));case 9:return a=t.sent,t.abrupt("break",12);case 11:return t.abrupt("return");case 12:return t.next=14,a.json();case 14:return r=t.sent,t.abrupt("return",r);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}console.log("https://gcp-nlp-api-server.herokuapp.com");var b={happy:0,sad:1,angry:2,surprise:3,calm:4,anticipated:5},x=new(function(){function t(){Object(f.a)(this,t),this.pageDispatcher=null,this.charDispatcher=null,this.emotionDispatcher=null}return Object(m.a)(t,[{key:"setPageDispatcher",value:function(t){this.pageDispatcher=t}},{key:"setCharDispatcher",value:function(t){this.charDispatcher=t}},{key:"setEmotionDispatcher",value:function(t){this.emotionDispatcher=t}},{key:"setPage",value:function(t){if(this.pageDispatcher&&this.charDispatcher&&this.emotionDispatcher){var e=b[t];this.pageDispatcher(e),this.charDispatcher("heart"),this.emotionDispatcher(t)}}}]),t}());var O=new(function(){function t(){Object(f.a)(this,t),this.sentencesHand=0,this.playTimeout=null,this.songIndex=0,this.emotionsOfSongs={},this.subtitleDispatcher=null,this.playIndexDispatcher=null}return Object(m.a)(t,[{key:"setSubTitleDispatcher",value:function(t){this.subtitleDispatcher=t}},{key:"setPlayIndexDispatcher",value:function(t){this.playIndexDispatcher=t}},{key:"flattenSentences",value:function(t){return t.sentences.map((function(t){var e=t.content;return"".concat(e,". ")})).join("")}},{key:"researchEmotion",value:function(){var t=Object(h.a)(l.a.mark((function t(e){var n,a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u[e].name,!this.emotionsOfSongs[n]){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,v(this.flattenSentences(u[e]),"EMOTION");case 5:a=t.sent,r=a.sentences,this.emotionsOfSongs[n]=r;case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"playIntervalCallback",value:function(){this.sentencesHand++,this.playInterval(this.songIndex)}},{key:"playInterval",value:function(t){var e=this;this.songIndex=t;var n=u[t],a=n.name,r=n.sentences;if(this.sentencesHand===r.length)return this.songIndex=(this.songIndex+1)%u.length,void this.play(this.songIndex);var i=r[this.sentencesHand],o=i.content,c=i.length,s=function(t){return t>=.5?"happy":t>=.3?"surprise":t>0?"anticipated":t<=-.5?"angry":t<=-.3?"sad":t<=0?"calm":void 0}(this.emotionsOfSongs[a][this.sentencesHand].score);x.setPage(s),this.subtitleDispatcher(o),this.playTimeout=setTimeout((function(){e.playIntervalCallback()}),c)}},{key:"play",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,n=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:0,this.sentencesHand=0,t.next=4,this.researchEmotion(e);case 4:this.playInterval(e),this.playIndexDispatcher(e);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"playByIndex",value:function(t){clearTimeout(this.playTimeout),this.play(t)}}]),t}()),E=n(4),j=n(31),k=n.n(j),D=n(15),I=n(16);function w(){var t=Object(D.a)(["\n  position: fixed;\n  left: ",";\n  top: ",";\n"]);return w=function(){return t},t}var S=I.a.div(w(),(function(t){return t.position.left}),(function(t){return t.position.top}));var T=function(t){var e=t.position,n=Object(o.useState)(),a=Object(E.a)(n,2),r=a[0],i=a[1];return x.setCharDispatcher(i),c.a.createElement(S,{position:e},c.a.createElement(k.a,{width:36,height:36,sprite:"images/sprite/".concat(r,".svg"),shouldAnimate:!0,fps:60,startFrame:0,stopLastFrame:!1}))};function P(){var t=Object(D.a)(["\n  border-bottom: ",";\n  text-align: center;\n  padding: 4px;\n  margin-bottom: 10px;\n  font-size: 20px;\n  cursor: pointer;\n"]);return P=function(){return t},t}function M(){var t=Object(D.a)(["\n  position: fixed;\n  left: ",";\n  top: ",";\n  width: max-content;\n  height: 300px;\n  display: flex;\n  flex-direction: column;\n"]);return M=function(){return t},t}var H=I.a.div(M(),(function(t){return t.position.left}),(function(t){return t.position.top})),C=I.a.div(P(),(function(t){return t.currentPlayIndex?"2px solid #111":"2px solid transparent"}));var B=function(t){var e=t.currentPlayIndex,n=t.list,a=t.position,r=Object(o.useState)(e),i=Object(E.a)(r,2),s=i[0],u=i[1];return O.setPlayIndexDispatcher(u),c.a.createElement(H,{position:a},n.map((function(t,e){return c.a.createElement(C,{currentPlayIndex:e===s,key:"".concat(t,"_").concat(e),onClick:function(){O.playByIndex(e)}},t)})))},F=n(17);var R=function(t){var e=t.shape,n=t.rotation,r=t.position,i=t.color,o=t.opacity,s=t.index;return c.a.createElement(F.a.mesh,{rotation:n,position:r.interpolate((function(t,e,n){return[t,e,n+50*-s]}))},c.a.createElement(F.a.meshPhongMaterial,{attach:"material",color:i,opacity:o,side:a.DoubleSide,depthWrite:!1,transparent:!0}),c.a.createElement("shapeBufferGeometry",{attach:"geometry",args:[e]}))},z=["#ffbcb7","#21242d","#ea5158","#0d4663","#2d4a3e","#8bd8d2","#ffbcb7","#21242d","#ea5158","#0d4663","#2d4a3e","#8bd8d2"],L=n(39),N=n(41),G=["happy1","happy2","sad1","sad2","angry1","angry2","surprise1","surprise2","calm1","calm2","anticipated1","anticipated2"].map((function(t){return"https://raw.githubusercontent.com/doong-jo/irony-mechanical-analysis/master/public/images/svg/sad1.svg"})).map((function(t){return new Promise((function(e){return(new L.a).load(t,(function(t){return e(Object(N.a)(t.paths.map((function(t,e){return t.toShapes(!0).map((function(n){return{shape:n,color:t.color,index:e}}))}))))}))}))}));var J=function(){var t=Object(o.useState)(0),e=Object(E.a)(t,2),n=e[0],r=e[1],i=Object(o.useState)([]),s=Object(E.a)(i,2),u=s[0],p=s[1];x.setPageDispatcher(r),Object(o.useEffect)((function(){G[n].then(p)}),[n]);var l=Object(F.b)({color:z[n]}).color,h=Object(F.c)(u,(function(t){return t.shape.uuid}),{from:{rotation:[0,-Math.PI/4,0],position:[0,50,-200],opacity:0},enter:{rotation:[0,0,0],position:[0,0,0],opacity:1},leave:{rotation:[0,.25,0],position:[0,-50,10],opacity:0},order:["leave","enter","update"],trail:5,lazy:!0});return c.a.createElement(c.a.Fragment,null,c.a.createElement("mesh",{scale:[2e4,2e4,1],rotation:[0,a.Math.degToRad(-20),0]},c.a.createElement("planeGeometry",{attach:"geometry",args:[1,1]}),c.a.createElement(F.a.meshPhongMaterial,{attach:"material",color:l,depthTest:!1})),c.a.createElement("group",{position:[1600,-700,n],rotation:[0,a.Math.degToRad(180),0]},h.map((function(t){var e=t.item,n=t.key,a=t.props;return c.a.createElement(R,Object.assign({key:n},e,a))}))))};var A=function(){var t=Object(o.useState)(""),e=Object(E.a)(t,2),n=e[0],a=e[1];return O.setSubTitleDispatcher(a),c.a.createElement(s.b,{position:[2e3,-1900,100]},c.a.createElement("h1",null,n))};function W(){var t=Object(D.a)(["\n  position: fixed;\n  left: ",";\n  top: ",";\n\n  color: black;\n  font-size: 24px;\n  font-weight: bold;\n"]);return W=function(){return t},t}var Y=I.a.div(W(),(function(t){return t.position.left}),(function(t){return t.position.top}));var _=function(t){var e=t.position,n=Object(o.useState)(""),a=Object(E.a)(n,2),r=a[0],i=a[1];return x.setEmotionDispatcher(i),c.a.createElement(Y,{position:e},r)};i.a.render(c.a.createElement((function(){return O.play(),c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{concurrent:!0,camera:{fov:80,position:[0,0,2e3],rotation:[0,a.Math.degToRad(-20),a.Math.degToRad(180)],near:.1,far:2e4}},c.a.createElement("ambientLight",{intensity:.1}),c.a.createElement("spotLight",{intensity:.5,position:[300,300,4e3]}),c.a.createElement(A,null),c.a.createElement(J,null)),c.a.createElement(B,{position:{left:"7%",top:"70%"},currentPlayIndex:0,list:u.map((function(t){return t.name}))}),c.a.createElement(T,{position:{left:"50%",top:"60%"}}),c.a.createElement(_,{position:{left:"7%",top:"50%"}}))}),null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.e33e09d1.chunk.js.map